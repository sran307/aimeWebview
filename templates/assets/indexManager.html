{% extends 'base.html' %}
{% load static %}
{% load customTags %}

{% block title %}{{transType}} Manager{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/budget/monthlyView.css' %}">
{% endblock %}

{% block content %}

    <div class="container-fluid mt-1">
        <a class="btn btn-secondary">{{transType}} TRADING DETAILS</a>
        <button class="btn btn-danger float-end mb-1 common-get " data-path="{% url 'assets:clearData' %}">clear</button>
        <a class="btn btn-info float-end me-2 mb-1" href="{% url 'assets:transManager' transType %}">Goto Transactions</a>
        <button class="btn btn-primary float-end mb-1 common-get ms-2 me-2" data-path="{% url 'assets:process' transType 'N' %}">Process</button>
        <button class="btn btn-primary float-end mb-1 common-get" data-path="{% url 'assets:process' transType 'A' %}">ReProcess</button>

        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>SlNo</th>
                    <th>Stock</th>
                    <th>buy On</th>
                    <th>buy Qty</th>
                    <th>buy Amnt</th>
                    <th>buy Brkg</th>
                    <th>Total buy Amnt</th>
                    <th>sell On</th>
                    <th>sell Qty</th>
                    <th>sell Amnt</th>
                    <th>sell Brkg</th>
                    <th>Total sell Amnt</th>
                    <th>Profit</th>
                    <th>Holding Period</th>
                </tr>
            </thead>
            <tbody>
                {% for stock in stockDetails %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{% if transType == 'OPTION' %}{{ stock.optionName }} {% elif transType == 'MF' %} {{ stock.mfName }} {% else %} {{ stock.stock }} {% endif %}</td>
                    <td>{{ stock.purchasedOn | date:'d-m-Y' }}</td>
                    <td>{{ stock.purchasedQty }}</td>
                    <td>{{ stock.purchasedAmnt }}</td>
                    <td>{{ stock.buyBrock }}</td>
                    <td>{{ stock.totalPurchasedAmnt }}</td>
                    <td>{{ stock.sellOn | date:'d-m-Y' }}</td>
                    <td>{{ stock.sellQty }}</td>
                    <td>{{ stock.sellAmnt }}</td>
                    <td>{{ stock.sellBrock }}</td>
                    <td>{{ stock.totalSellAmnt }}</td>
                    <td>{{ stock.profit }}</td>
                    <td>{{ stock.purchasedOn | holdingPeriod:stock.sellOn }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
       
    </div>

{% endblock %}