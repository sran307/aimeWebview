{% extends 'base.html' %}
{% load static %}
{% load customTags %}

{% block title %}Budget Manager{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/budget/monthlyView.css' %}">
{% endblock %}

{% block content %}

<div class="container-fluid px-2">
  <table class="table table-dark table-bordered table-sm text-center align-middle">
    <thead>
      <tr>
        <td>
          <table class="table table-bordered table-dark table-sm mb-0">
            {% for earning in earnings %}
            <tr>
              <th class="w-25">{{ earning.desc }}</th>
              <th contenteditable="true" class="w-50"></th>
            </tr>
            {% endfor %}
            <tr>
              <th>Total</th>
              <th contenteditable="true"></th>
            </tr>
          </table>
        </td>
        <td>
          <table class="table table-bordered table-dark table-sm mb-0">
            <tr><th class="w-25">Expected Total</th><th contenteditable="true" class="w-50"></th></tr>
            <tr><th>Expected Balance</th><th contenteditable="true"></th></tr>
            <tr><th>Actual Total</th><th contenteditable="true"></th></tr>
            <tr><th>Actual Balance</th><th contenteditable="true"></th></tr>
          </table>
        </td>
      </tr>
    </thead>
  </table>

  <table class="table table-dark table-bordered table-sm text-center align-middle" id="sheetTable">
    <tbody>
      <tr>
        <td>Date</td>
        {% for expense in expenses %}
        <td>{{ expense.desc }}</td>
        {% endfor %}
      </tr>

      <tr class="table-warning text-dark fw-bold">
        <td>Expect Expense</td>
        {% for expense in expenses %}
        <td contenteditable="true"></td>
        {% endfor %}
      </tr>

      <tr class="table-danger text-white fw-bold">
        <td>Total Expense</td>
        {% for expense in expenses %}
        <td contenteditable="true"></td>
        {% endfor %}
      </tr>

      <tr class="table-success text-white fw-bold">
        <td>Balance Amount</td>
        {% for expense in expenses %}
        <td contenteditable="true"></td>
        {% endfor %}
      </tr>

      {% for date in dates %}
      <tr>
        <td>{{ date|date:"d/m/Y" }}</td>
        {% for expense in expenses %}
        <td  contenteditable="true"
            class="editable-cell"
            data-date="{{ date|date:'Y-m-d' }}"
            data-item="{{ expense.id }}"
            data-month="{{ month.id }}"
            data-year="{{ finYear.id }}"
            data-path="{% url 'budgetManager:save_monthly_data' %}"
        >{% get_value data_dict expense.id date %}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>




{% endblock %}

{% block extra_js %}
<script src="{% static 'js/budget/monthlyView.js' %}"></script>
{% endblock %}